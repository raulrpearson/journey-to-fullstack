# Web

- Understand CORS
- [Frontend checklist](https://frontendchecklist.io/)

## JAMstack

- [Serverless](https://serverless.com/)
- [Zero Server](https://zeroserver.io/)
- [Hoodie](http://hood.ie/intro/) is a free and Open Source Software for
  building applications for the web and iOS. It is a complete backend for your
  apps, ready for you to get creative. It works immediately out-of-the-box:
  develop your frontend code, plug it into Hoodie’s frontend-friendly API and your
  app is ready.

## HTTP

## Cookies

## Web 3.0

- [Web3 Summit 2018 videos](https://2018.web3summit.com/video/)
- Join the [indieweb movement](https://indieweb.org/Getting_Started).
- Filecoin, IPFS
- Steem, DTube
- Hashbase, Keybase
- Solid, inrupt
- Zcoin
- Dat, Beaker browser and company

## Using system fonts

Triggered by ["The New System Font
Stack?"](https://bitsofco.de/the-new-system-font-stack/), I decided to look into
using that on my web projects. That article suggests using the following
snippet:

```css
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
}
```

That's from September 2016, inspired by WordPress 4.6, so it's a bit out of
date. In September 2017, CSS-Tricks provides a similar stack but gives this
warning:

> This method should only be used on the font-family property instead of the
> font shorthand. Booking.com published a thorough write-up on the warnings it
> generates due to the leading font appearing to be a vendor prefix.

They also mention an alternative interesting strategy, using `@font-face`:

```css
/* Define the "system" font family */
@font-face {
  font-family: system;
  font-style: normal;
  font-weight: 300;
  src: local('.SFNSText-Light'), local('.HelveticaNeueDeskInterface-Light'),
    local('.LucidaGrandeUI'), local('Ubuntu Light'), local('Segoe UI Light'),
    local('Roboto-Light'), local('DroidSans'), local('Tahoma');
}

/* Now, let's apply it on an element */
body {
  font-family: 'system';
}
```

Using the
[`system-font.css`](https://github.com/jonathantneal/system-font-css/blob/gh-pages/system-font.css)
you can use eight variations of the system-ui font family; light (300) light
italic, normal (400), normal italic, medium (500), medium italic, bold (700),
and bold italic. Like this:

```css
body {
  font-family: system-ui;
}

blockquote {
  font: italic 300 system-ui;
}

p {
  font: 400 system-ui;
}
```

Note that in the previous two cases, the font faces `system` and `system-ui`
were being defined in the accompanying CSS. On the other hand, `system-ui` was
added as a possible value for the `font-family` property in CSS. It seems
[decently supported](https://caniuse.com/#feat=font-family-system-ui).

It seems appropriate to use [the
following](https://furbo.org/2018/03/28/system-fonts-in-css/):

```css
font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
  'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
```

But [this](https://infinnie.github.io/blog/2017/systemui.html), so W(ho)TF
knows. I just checked Bootstrap and they use this:

```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica
Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe
UI Symbol', 'Noto Color Emoji';
```

## Loading fonts

To read: [Web Font
Optimization](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization).

[This
article](https://medium.com/clio-calliope/making-google-fonts-faster-aadf3c02a36d)
gives a great overview of strategies to improve the loading of Google Fonts.
Some of the tips apply to fonts in general.

We typically load Google Fonts by adding this piece of markup:

```html
<link
  href="https://fonts.googleapis.com/css?family=Muli:400"
  rel="stylesheet"
/>
```

That returns a stylesheet full of `@font-face` declarations like this one:

```css
@font-face {
  font-family: 'Muli';
  font-style: normal;
  font-weight: 400;
  src: local('Muli Regular'), local('Muli-Regular'),
    url(https://fonts.gstatic.com/s/muli/v12/7Auwp_0qiz-afTzGLQjUwkQ1OQ.woff2)
      format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB,
    U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
```

This tries to load fonts locally if they're available, before going to
`fonts.gstatic.com`. That's not too bad, specially considering that Google's
severs are good, but we have a couple of problems with this approach:

1. We're performing a minimum of 2 separate requests to different hosts -
   first for the stylesheet at `fonts.googleapis.com`, and then to a unique URL
   for each font hosted at `fonts.gstatic.com`.

2. We have no control over flash-of-invisible-text (FOIT) and
   flash-of-unstyled-text (FOUT) while fonts are loading. Setting the
   `font-display` property in the `@font-face` would give us that control, but
   it’s defined in the Google Fonts stylesheet.

3. Finally, while rare, if Google Fonts is down, we won’t get our fonts. If our
   own CDN is down, then at least we are consistently delivering nothing to our
   users, right?

Two strategies are suggested. At the very least, warm up the DNS lookup, TCP
handshake, and TLS negotiation to `fonts.gstatic.com` with `preconnect`:

```html
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
<link
  href="https://fonts.googleapis.com/css?family=Muli:400"
  rel="stylesheet"
/>
```

Alternatively, self-host. Use
[google-webfonts-helper](https://google-webfonts-helper.herokuapp.com/fonts) and
follow instructions.

“Modern Browsers” will give you WOFF and WOFF2 formats while “Best Support” will
also give you TTF, EOT, and SVG. A reasonable option is to chose to only host
WOFF and WOFF2 while selecting system fonts as fallbacks for older browsers.

In your pages, use `preload` for fonts that you're sure you'll be using:
"Preload is a declarative fetch, allowing you to force the browser to make a
request for a resource without blocking the document’s onload event." ([Preload,
Prefetch And Priorities in
Chrome](https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf)).

All the browsers that support `preload` also support WOFF2 so we can safely
choose only WOFF2.

```html
<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="./fonts/muli-v12-latin-regular.woff2"
  crossorigin
/>

<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="./fonts/muli-v12-latin-700.woff2"
  crossorigin
/>
```

- `rel="preload"` tells the browser to declaratively fetch the resource but not
  “execute” it (our CSS will queue usage).

- `as="font"` tells the browser what it will be downloading so that it can set
  an appropriate priority. Without it, the browser would set a default low
  priority.

- `type="font/woff2` tells the browser the file type so that it only downloads
  the resource if it supports that file type.

- `crossorigin` is required because fonts are fetched using anonymous mode CORS.

If you’re okay with FOUT, or flash of unstyled text, then we can fix FOIT by
adding `font-display: swap;` to our `@font-face` declarations. More info in [this
glitch](https://font-display.glitch.me/). It explains the use of the
`font-display` property:

- Font loading follows three stages: block, swap, failure.

- `font-display` is applied per font-face.

- `font-display: block` produces FOIT but is good in cases where your font
  branding is important and you don't want people to see you site with fallback
  fonts.

- `font-display: swap` produces FOUT, the text is shown immediately in the
  fallback font until the custom font loads.

- `font-display: fallback` somewhere in between block and swap. The text is
  invisible for a short period of time (100ms). Then if the custom font hasn't
  downloaded, the text is shown in a fallback font (for about 3s), then swapped
  after the custom font loads.

- `font-display: optional` like fallback but the browser can decide to not use
  the custom font at all, based on the user's connection speed.

[subfont](https://github.com/Munter/subfont) is a command line tool to optimize
your webfont loading. Aggressive subsetting based on your font use, self-hosting
of Google fonts and preloading. If you're cool, you use Gatsby and life's good:
there's [a plugin for
that](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-subfont).

## Accesibility

Learn about
[accessibility](https://codeburst.io/seven-ways-to-make-your-web-app-more-accessible-411a8c716fcb).

## Web components

Learn about [web
components](https://codeburst.io/6-reasons-you-should-use-native-web-components-b45e18e069c2).

## Solid

[Solid](https://solid.mit.edu/) (Social Linked Data) is a web decentralization
project led by Tim Berners-Lee, the inventor of the World Wide Web. The project:

> aims to radically change the way Web applications work today, resulting in
> true data ownership as well as improved privacy

by developing a platform for linked-data applications that are completely
decentralized and fully under users' control rather than controlled by other
entities.

Solid's central focus is to enable the discovery and sharing of information in a
way that preserves privacy. A user stores personal data in "pods" (personal
online data stores) hosted wherever the user desires. Applications that are
authenticated by Solid are allowed to request data if the user has given the
application permission.

A user may distribute personal information among several pods; for example,
different pods might contain personal profile data, contact information,
financial information, health, travel plans, or other information. The user
could then join an authenticated social-networking application by giving it
permission to access appropriate information in a specific pod.

The user retains complete ownership and control of data in the user's pods: what
data each pod contains, where each pod is stored, and which applications have
permission to use the data.

### Specification overview

[Solid](https://solid.inrupt.com/docs/intro-to-solid-spec) is a proposed set of
conventions and tools for building decentralized social applications based on
[Linked Data](https://www.w3.org/DesignIssues/LinkedData.html) principles. Solid
is modular and extensible. It relies as much as possible on existing W3C
standards and protocols.

- **Identity**: Solid uses
  [WebID](http://www.w3.org/2005/Incubator/webid/spec/identity/) URIs as
  universal usernames or actor identifiers. WebIDs provide globally unique
  decentralized identifiers, enable cross-service federated signin, prevent
  service provider lock-in, and give users control over their own identity.

- **Profiles**: the WebID URI's primary function is to point to the location of a
  public WebID Profile Document. Solid uses these for management of user identity
  and security credentials (such as public keys), and user preferences
  discovery. Profiles are used by many actor types like users, groups,
  organizations, devices and software applications.

  A WebID URI, when dereferenced, yields a WebID Profile Document in a Linked
  Data format (Turtle by default, but often available as JSON-LD or HTML+RDFa).
  Parsing this document provides a client application with useful information,
  such as the user's name and profile image, links to user preferences and
  related documents, and lists of public key certificates or other relevant
  identity credentials.

  See component spec: [Solid WebID Profiles
  Specification](https://github.com/solid/solid-spec/blob/master/solid-webid-profiles.md).

- **Authentication**: the process of determining a user’s identity. Applications
  usually manage authentication with usernames and passwords as well as a recovery
  mechanism using typically email.

  Solid currently uses
  [WebID-TLS](https://www.w3.org/2005/Incubator/webid/spec/tls/) as its primary
  authentication mechanism. Alternative complementary mechanisms are also being
  actively investigated. In addition, Solid recommends that server
  implementations also offer secondary authentication available for users for
  Account Recovery (via email or some other out-of-band mechanism).

  See component spec: [Solid WebID-TLS
  Specification](https://github.com/solid/solid-spec/blob/master/authn-webid-tls.md).

  The Solid team is currently implementing support for WebID-OIDC as another
  primary authentication mechanism. It is based on the OAuth2/OpenID Connect
  protocols, adapted for WebID based decentralized use cases.

  See component spec: [WebID-OIDC
  Specification](https://github.com/solid/webid-oidc-spec).

  There are several other authentication mechanisms that are currently being
  investigated, such as combinations of traditional username-and-password
  authentication and WebID-TLS Delegation.

  Regardless of the primary authentication mechanism, bearer tokens and other
  proofs of identity tend to get lost by users. Passwords can be forgotten,
  browser certificates can be lost to hardware failure, and so on. Solid
  recommends that secondary Account Recovery mechanisms are provided by server
  implementers, to aid in these scenarios.

- **Authorization and access control**: the process of deciding whether a user
  has access to a particular resource. Solid currently uses the Web Access
  Control (WAC) mechanism for cross-domain authorization for all its resources.

  See component spec: [Solid WAC
  Specification](https://github.com/solid/web-access-control-spec).

- **Content representation**: Solid deals with reading and writing two kinds of
  resources: Linked Data resources (RDF in the form of JSON-LD, Turtle, HTML+RDFa,
  etc.) and everything else (binary data and non-linked-data structured text).
  you can build Solid applications with non-linked data resources, using actual
  RDF-based Linked Data provides you with considerable benefits in terms of
  interoperability with the rest of the Solid app ecosystem.

  See component spec: [Solid Content
  Representation](https://github.com/solid/solid-spec/blob/master/content-representation.md).

- **Reading and writing resources**: Solid extends the [Linked Data
  Platform](https://www.w3.org/TR/ldp/) spec to provide a simple REST API for CRUD
  operations on resources and containers. Solid also provides a WebSockets based
  API for a PubSub (Publish/Subscribe) mechanism, through which clients can be
  notified in real time of changes affecting a give resource.

  See component spec: [HTTPS REST
  API](https://github.com/solid/solid-spec/blob/master/api-rest.md).

  See component spec: [WebSockets
  API](https://github.com/solid/solid-spec/blob/master/api-websockets.md).

- **Social web app protocols**: Solid provides a number of specs and
  recommendations to help developers achieve interoperability between various
  social web applications that are part of the ecosystem. Currently,
  notifications. API recommendations for managing subscriptions and friends lists
  are still being discussed.

  See component spec: [Linked Data Notifications](https://www.w3.org/TR/ldn/)

- **Recommendations for implementations**: for servers and clients.

  See component spec: [Recommendations for Server
  Implementations](https://github.com/solid/solid-spec/blob/master/recommendations-server.md).

  See component spec: [Recommendations for Client
  Implementations](https://github.com/solid/solid-spec/blob/master/recommendations-client.md).

### Repositories of interest

- [solid-spec](https://github.com/solid/solid-spec): the Solid spec and
  architecture

- [node-solid-server](https://github.com/solid/node-solid-server): Solid server
  in Node.js. It lets you run a Solid server on top of the file-system. You can
  use it as a command-line tool (easy) or as a library (advanced).

- [solid-auth-client](https://github.com/solid/solid-auth-client): browser
  library that allows your apps to securely log in to Solid data pods and read
  and write data from them.

- [rdflib.js](https://github.com/linkeddata/rdflib.js/): JavaScript RDF library
  for browsers and Node.js.

- React resources by Inrupt:
  [solid-react-sdk](https://github.com/Inrupt-inc/solid-react-sdk),
  [solid-style-guide](https://github.com/Inrupt-inc/solid-style-guide),
  [generator-solid-react](https://github.com/Inrupt-inc/generator-solid-react)
  and
  [solid-react-components](https://github.com/Inrupt-inc/solid-react-components).

- The [Solid organization](https://github.com/solid) GitHub page.

- The [Inrupt organization](https://github.com/Inrupt-inc) GitHub page.

### Interesting apps

- [Solid Pay](https://docs.solidpay.org/) is about making payments between two
  people on the Web. It builds heavily on the Solid framework and the
  [webcredits](https://webcredits.github.io/spec/) specification.
